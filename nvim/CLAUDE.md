# Neovim-Zellij-Yabai Navigation Integration

## Overview
Three-layer navigation system that seamlessly switches between neovim splits, zellij panes, and yabai-managed windows using Ctrl+hjkl.

## Architecture

```
User presses Ctrl+H
       ↓
   [skhd] checks Ghostty title
       ↓
  title = "*zellij"?
    ├─ YES → Pass to zellij
    │           ↓
    │    [vim-zellij-navigator plugin]
    │           ↓
    │      current pane is nvim?
    │        ├─ YES → Forward Ctrl+h to nvim
    │        │           ↓
    │        │    [smart-splits.nvim]
    │        │        ↓
    │        │   at nvim split edge?
    │        │     ├─ NO  → Move nvim split
    │        │     └─ YES → at_edge handler
    │        │                ↓
    │        │         at zellij pane edge?
    │        │           ├─ NO  → Move zellij pane
    │        │           └─ YES → yabai focus window
    │        │
    │        └─ NO → zellij MoveFocus (stops at edge)
    │
    └─ NO (title = "*- Nvim"?)
          ├─ YES → Pass to nvim (direct, no zellij)
          │           ↓
          │    [smart-splits.nvim] → at_edge → yabai
          │
          └─ NO → yabai -m window --focus directly
```

## Components

1. **skhd** (`../.skhdrc`): OS-level hotkey daemon with title filtering
2. **vim-zellij-navigator**: Zellij plugin for nvim detection (from GitHub releases)
3. **zellij** (`../zellij/config.kdl`): Terminal multiplexer config
4. **smart-splits.nvim** (`lua/plugins/smart-splits.lua`): Neovim split navigation with multiplexer + yabai integration

## Known Limitation

Non-nvim panes at zellij edge stop navigating (no yabai call). Full three-layer navigation only works from nvim panes.

## Configuration Files

### skhd (`.skhdrc`)
```
ctrl - h [
    "Ghostty" title="*zellij" ~      # zellij: passthrough (title ends with "zellij")
    "Ghostty" title="*- Nvim" ~      # nvim direct: passthrough
    * : yabai -m window --focus west # default: yabai
]
```

### zellij (`zellij/config.kdl`)
- `default_mode "locked"` - starts in locked mode for passthrough
- zellij-nav plugin bindings in locked mode for Ctrl+hjkl

### smart-splits.nvim
- Detects multiplexer (zellij) automatically via `$ZELLIJ` env
- Custom `at_edge` handler checks both nvim and zellij edges
- Calls yabai only when at the outermost edge

## Shell Integration

`.zshrc` sets window title to "zellij" when inside zellij (zellij prepends `session | `):
```bash
if [[ -n "$ZELLIJ" ]]; then
  _zellij_title_precmd() {
    print -Pn "\e]0;zellij\a"
  }
  precmd_functions+=(_zellij_title_precmd)
fi
```
Result: title becomes `<session> | zellij`, matched by skhd pattern `*zellij`


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

*No recent activity*
</claude-mem-context>